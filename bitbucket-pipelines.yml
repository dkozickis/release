image: golang

definitions:
  steps:
    - step: &unit
        name: unit tests
        script:
          - go get -u github.com/golang/dep/cmd/dep
          - dep init
          - dep ensure
          - go test ./...
    - step: &lint
        name: linting
        script:
          - go get -u golang.org/x/lint/golint
          - golint -set_exit_status ./...

pipelines:
  default:
    - parallel:
       - step: *unit
       - step: *lint
